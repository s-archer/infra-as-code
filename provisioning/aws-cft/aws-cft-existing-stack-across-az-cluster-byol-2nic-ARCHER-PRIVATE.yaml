- name: Provision ec2 instances based on the environment
  hosts: localhost
  connection: local
  gather_facts: no

  tasks:
  - name: launch ansible cloudformation example
    cloudformation:
      stack_name: "ansible-cloudformation-f5-existing-stack-byol-2nic-bigip"
      state: "present"
      ec2_access_key: "AKIAIZ3JD2MOZ6RL7YWA"
      ec2_secret_key: "DntyFKltGYJYa87XFXdQdM4Mmp/OmEY/aevMUGiY"
      region: "eu-west-2"
      disable_rollback: true
      template_url: "https://s3.amazonaws.com/f5-cft/f5-existing-stack-across-az-cluster-byol-2nic-bigip.template"
      template_parameters:
        Vpc: "vpc-0dfffb8f73f13449e"
        imageName: "AllOneBootLocation"
        instanceType: "t2.large"
        managementSubnetAz1: "subnet-0cc97d670b8fc6ef1"
        managementSubnetAz2: "subnet-01c4f0f3a28f0ca67"
        subnet1Az1: "subnet-098af3cbf86f9f8c8"
        subnet1Az2: "subnet-0bdd07a7c10671ded"
        restrictedSrcAddress: "0.0.0.0/0"
        restrictedSrcAddressApp: "0.0.0.0/0"
        licenseKey1: "LUPIR-BIINR-NVSHJ-MYNMQ-RHMGMXQ"
        licenseKey2: "DNTTI-WGAZI-WJIYK-JROMW-BOTWKXA"
        sshKey: "arch_public_2"
        ntpServer: "0.pool.ntp.org"
        timezone: "UTC"        
      tags:
        Stack: "ansible-cloudformation-f5-existing-stack-across-az-cluster-byol-2nic-bigip"









